{% extends 'partials/base.html' %}
{% load static %}
{% load humanize %}

{% block marquee %}{% endblock marquee %}

{% block content %}

<style>
    .star-label {
    font-size: 1.5rem;
    color: #ddd;
    cursor: pointer;
}

input[type="radio"]:checked + .star-label i,
.star-label:hover ~ .star-label i {
    color: #ffd700;
}

input[type="radio"]:checked ~ .star-label i {
    color: #ffd700;
}
    .product-thumb a.active img {
    border: 2px solid #4CAF50; /* Matches the button color */
}

</style>

            <!-- Body Container -->
            <div id="page-content"> 
                <!--Page Header-->
                <div class="page-header text-center">
                    <div class="container">
                        <div class="row align-items-center">
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                                <!--Breadcrumbs-->
                                <div class="breadcrumbs"><a href="{% url 'home' %}" title="Back to the home page">Home</a><span class="main-title fw-bold"><i class="icon anm anm-angle-right-l"></i>{{product.name}}</span></div>
                                <!--End Breadcrumbs-->
                            </div>
                        </div>
                    </div>
                </div>
                <!--End Page Header-->

                <!--Main Content-->
                <div class="container">     
                    <!--Product Content-->
                    <div class="product-single">
                        <div class="row">
                            <div class="col-lg-6 col-md-6 col-sm-12 col-12 product-layout-img mb-4 mb-md-0">
                                <!-- Product Horizontal -->
                                <div class="product-details-img product-horizontal-style">
                                    <!-- Product Main -->
                                    <div class="zoompro-wrap">
                                        <!-- Product Image -->
                                        <div class="zoompro-span"><img id="zoompro" class="zoompro" src="{{ product.cover_image.url }}" data-zoom-image="{{ product.cover_image.url }}" alt="product" width="625" height="808" /></div>
                                        <!-- End Product Image -->
                                        <!-- Product Label -->
                                        <div class="product-labels"><span class="lbl pr-label1">Best seller</span></div>
                                        <!-- End Product Label -->
                                        <!-- End Product Buttons -->
                                        <div class="product-buttons">
                                            <a href="#" class="btn prlightbox" data-bs-toggle="tooltip" data-bs-placement="top" title="Zoom Image"><i class="icon anm anm-expand-l-arrows"></i></a>
                                        </div>
                                        <!-- End Product Buttons -->
                                    </div>
                                    <!-- End Product Main -->

                                    <!-- Product Thumb -->
                                    <div class="product-thumb product-horizontal-thumb mt-3">
                                        <div id="gallery" class="product-thumb-horizontal">
                                            {% if product.image1 %}
                                            <a data-image="{{product.image1.url}}" data-zoom-image="{{product.image1.url}}" class="slick-slide slick-cloned active">
                                                <img class="blur-up lazyload" data-src="{{product.image1.url}}" src="{{product.image1.url}}" alt="product" width="625" height="808" />
                                            </a>
                                            {% endif %}

                                            {% if product.image2 %}
                                            <a data-image="{{ product.image2.url }}" data-zoom-image="{{ product.image2.url }}" class="slick-slide slick-cloned">
                                                <img class="blur-up lazyload" data-src="{{ product.image2.url }}" src="{{ product.image2.url }}" alt="product" width="625" height="808" />
                                            </a>
                                            {% endif %}

                                            {% if product.image3 %}
                                            <a data-image="{{ product.image3.url }}" data-zoom-image="{{ product.image3.url }}" class="slick-slide slick-cloned">
                                                <img class="blur-up lazyload" data-src="{{ product.image3.url }}" src="{{ product.image3.url }}" alt="product" width="625" height="808" />
                                            </a>
                                            {% endif %}

                                            {% if product.image4 %}
                                            <a data-image="{{ product.image4.url }}" data-zoom-image="{{ product.image4.url }}" class="slick-slide slick-cloned">
                                                <img class="blur-up lazyload" data-src="{{ product.image4.url }}" src="{{ product.image4.url }}" alt="product" width="625" height="808" />
                                            </a>
                                            {% endif %}

                                            {% if product.image5 %}
                                            <a data-image="{{ product.image5.url }}" data-zoom-image="{{ product.image5.url }}" class="slick-slide slick-cloned">
                                                <img class="blur-up lazyload" data-src="{{ product.image5.url }}" src="{{ product.image5.url }}" alt="product" width="625" height="808" />
                                            </a>
                                            {% endif %}

                                            {% if product.image6 %}
                                            <a data-image="{{ product.image6.url }}" data-zoom-image="{{ product.image6.url }}" class="slick-slide slick-cloned">
                                                <img class="blur-up lazyload" data-src="{{ product.image6.url }}" src="{{ product.image6.url }}" alt="product" width="625" height="808" />
                                            </a>
                                            {% endif %}
                                        </div>
                                    </div>
                                    <!-- End Product Thumb -->

                                    <!-- Product Gallery -->
                                    <div class="lightboximages">

                                        {% if product.image1 %}
                                        <a href="{{ product.image1.url }}" data-size="1000x1280"></a>
                                        {% endif %}

                                        {% if product.image2 %}
                                        <a href="{{ product.image2.url }}" data-size="1000x1280"></a>
                                        {% endif %}

                                        {% if product.image3 %}
                                        <a href="{{ product.image3.url }}" data-size="1000x1280"></a>
                                        {% endif %}

                                        {% if product.image4 %}
                                        <a href="{{ product.image4.url }}" data-size="1000x1280"></a>
                                        {% endif %}

                                        {% if product.image5 %}
                                        <a href="{{ product.image5.url }}" data-size="1000x1280"></a>
                                        {% endif %}

                                        {% if product.image6 %}
                                        <a href="{{ product.image6.url }}" data-size="1000x1280"></a>
                                        {% endif %}
                                    </div>
                                    <!-- End Product Gallery -->
                                </div>
                                <!-- End Product Horizontal -->
                            </div>

                            <div class="col-lg-6 col-md-6 col-sm-12 col-12 product-layout-info">
                                <!-- Product Details -->
                                <div class="product-single-meta">
                                    <h2 class="product-main-title">{{ product.name }}</h2>
                                    <!-- Product Reviews -->
                                    <div class="product-review d-flex-center mb-3">
                                        <div class="reviewStar d-flex-center">
                                            {% for i in rating_range %}
                                                {% if i <= ratings_data.avg_rating %}
                                                    <i class="icon anm anm-star"></i>
                                                {% elif i <= ratings_data.avg_rating|floatformat:1 %}
                                                    <i class="icon anm anm-star-half"></i>
                                                {% else %}
                                                    <i class="icon anm anm-star-o"></i>
                                                {% endif %}
                                            {% endfor %}
                                            <span class="caption ms-2">{{ ratings_data.total_reviews }} Reviews</span></div>
                                        <a class="reviewLink d-flex-center" href="#reviews">Write a Review</a>
                                    </div>
                                    <!-- End Product Reviews -->
                                    <!-- Product Info -->
                                    <div class="product-info">
<!--                                        <p class="product-type">Product Type:<span class="text">Shirts</span></p>-->
                                        <p class="product-sku">SKU:<span class="text">{{ product.sku }}</span></p>
                                        {% if product.categories.all %}
                                        <p class="product-cat">Category: <span>
                                            {% for category in product.categories.all %}
                                            <a href="{% url 'category' category.name %}">{{ category.name }}</a>{% if not forloop.last %},{% endif %}
                                            {% endfor %}
                                        </span></p>
                                        {% endif %}

                                        {% if product.tags.all %}
                                        <p class="product-cat">Tags: <span>
                                            {% for tag in product.tags.all %}
                                            <a>{{ tag.name }}</a>{% if not forloop.last %},{% endif %}
                                            {% endfor %}
                                        </span></p>
                                        {% endif %}
                                    </div>
                                    <!-- End Product Info -->
                                    <!-- Product Price -->
                                    <div class="product-price d-flex-center my-3">
                                        {% if product.percentage_discount %}
                                            <span class="price old-price">&#8358;{{product.price|floatformat:2|intcomma}}</span><span class="price">&#8358;{{product.discounted_price|floatformat:2|intcomma}}</span>
                                        {% else %}
                                            <span class="price">&#8358;{{product.price|floatformat:2|intcomma}}</span>
                                        {% endif %}
                                    </div>
                                    <!-- End Product Price -->
                                    <hr>
                                    <!-- Sort Description -->
                                    <div class="sort-description">
<!--                                        <ul class="checkmark-info">-->
<!--                                            <li>High quality fabric, very comfortable to touch and wear.</li>-->
<!--                                            <li>It can tie in front-is forgiving to you belly or tie behind.</li>-->
<!--                                            <li>Light weight and perfect for layering.</li>-->
<!--                                        </ul>-->
                                    </div>
                                    <!-- End Sort Description -->
                                </div>
                                <!-- End Product Details -->

                                <!-- Product Form -->
                                <form method="post" action="#" class="product-form product-form-border hidedropdown">                                    
                                    <!-- Product Action -->
                                    <div class="product-action w-100 d-flex-wrap mb-3">
                                        <!-- Product Quantity -->
                                        <div class="product-form-quantity w-100 d-flex-center">
                                            <div class="qtyField">
                                                <a class="qtyBtn minus" href="#;"><i class="icon anm anm-minus-r"></i></a>
                                                <input id="qty-cart" data-step="0" title="Qty" type="text" name="quantity" value="1" class="product-form-input qty" />
                                                <a class="qtyBtn plus" href="#;"><i class="icon anm anm-plus-r"></i></a>
                                            </div>

                                            <div class="pro-stockLbl ms-3">
                                                <span class="d-flex-center stockLbl instock text-uppercase">{{ product.availability }}</span>
                                            </div>
                                        </div>
                                        <!-- End Product Quantity -->

                                        <!-- Product Add -->
                                        <div class="product-form-submit addcart fl-1 ms-0 mt-3">
                                            <button type="button" value="{{ product.id }}" id="add-cart" data-url="{% url 'add_to_cart' %}" class="btn btn-secondary product-form-cart-submit"><span>Add to cart</span></button>
                                        </div>
                                        <!-- Product Add -->

                                    </div>
                                    <!-- End Product Action -->

                                    <!-- Product Info link -->
                                    <p class="infolinks d-flex-center justify-content-between">
                                        {% if user.is_authenticated %}
                                            <a class="text-link wishlist add_to_wishlist"
                                               data-url="{% url 'add-remove-from-wishlist' %}"
                                                data-product-id="{{ product.id }}">
                                                <i class="icon anm anm-heart-l me-2"></i> <span>Add to Wishlist</span>
                                            </a>

                                        {% endif %}
                                        <a href="#shippingInfo-modal" class="text-link shippingInfo" data-bs-toggle="modal" data-bs-target="#shippingInfo_modal"><i class="icon anm anm-paper-l-plane me-2"></i> <span>Delivery &amp; Returns</span></a>
                                        <a href="#productInquiry-modal" class="text-link emaillink me-0" data-bs-toggle="modal" data-bs-target="#productInquiry_modal"><i class="icon anm anm-question-cil me-2"></i> <span>Enquiry</span></a>
                                    </p>
                                    <!-- End Product Info link -->
                                </form>
                                <!-- End Product Form -->

                                <!-- Product Info -->
<!--                                <div class="userViewMsg featureText" data-user="20" data-time="11000"><i class="icon anm anm-eye-r"></i><b class="uersView">21</b> People are Looking for this Product</div> -->
<!--                                <div class="shippingMsg featureText"><i class="icon anm anm-clock-r"></i>Estimated Delivery Between <b id="fromDate">Wed, May 1</b> and <b id="toDate">Tue, May 7</b>.</div>                             -->
<!--                                <div class="freeShipMsg featureText" data-price="199"><i class="icon anm anm-truck-r"></i>Spent <b class="freeShip"><span class="money" data-currency-usd="$199.00" data-currency="USD">$199.00</span></b> More for Free shipping</div>                                -->
                                <!-- End Product Info -->

                                <!-- Social Sharing -->
                                <div class="social-sharing d-flex-center mt-2 lh-lg">
                                    <span class="sharing-lbl fw-600">Share :</span>
                                    <a href="#" class="d-flex-center btn btn-link btn--share share-facebook"><i class="icon anm anm-facebook-f"></i><span class="share-title">Facebook</span></a>
                                    <a href="#" class="d-flex-center btn btn-link btn--share share-twitter"><i class="icon anm anm-twitter"></i><span class="share-title">Tweet</span></a>
                                    <a href="#" class="d-flex-center btn btn-link btn--share share-pinterest"><i class="icon anm anm-pinterest-p"></i> <span class="share-title">Pin it</span></a>
                                    <a href="#" class="d-flex-center btn btn-link btn--share share-linkedin"><i class="icon anm anm-linkedin-in"></i><span class="share-title">Linkedin</span></a>
                                    <a href="#" class="d-flex-center btn btn-link btn--share share-email"><i class="icon anm anm-envelope-l"></i><span class="share-title">Email</span></a>
                                </div>
                                <!-- End Social Sharing -->
<!--                                <div class="trustseal-img mt-3 mt-md-4"><img src="assets/images/icons/powerby-cards.jpg" alt="powerby cards" width="470" /></div>-->
                            </div>
                        </div>
                    </div>
                    <!--Product Content-->

                    <!--Product Tabs-->
                    <div class="tabs-listing section pb-0">
                        <ul class="product-tabs style3 border-bottom list-unstyled d-flex-wrap d-flex-justify-center d-none d-md-flex">
                            <li rel="description" class="active"><a class="tablink">Description</a></li>
<!--                            <li rel="additionalInformation"><a class="tablink">Additional Information</a></li>-->
<!--                            <li rel="size-chart"><a class="tablink">Size Chart</a></li>-->
<!--                            <li rel="shipping-return"><a class="tablink">Shipping &amp; Return</a></li>-->
                            <li rel="reviews"><a class="tablink">Reviews</a></li>
                        </ul>

                        <div class="tab-container">
                            <!--Description-->
                            <h3 class="tabs-ac-style d-md-none active" rel="description">Description</h3>
                            <div id="description" class="tab-content">
                                <div class="product-description">
                                    <div class="row">
                                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 mb-0 mb-md-0">
                                            <p>{{ product.description }}</p>
<!--                                            <h4 class="mb-3">Features</h4>-->
<!--                                            <ul class="checkmark-info">-->
<!--                                                <li>High quality fabric, very comfortable to touch and wear.</li>-->
<!--                                                <li>This cardigan sweater is cute for no reason,perfect for travel and casual.</li>-->
<!--                                                <li>It can tie in front-is forgiving to you belly or tie behind.</li>-->
<!--                                                <li>Light weight and perfect for layering.</li>-->
<!--                                            </ul>-->
<!--                                            <h4 class="mb-3">Fabric</h4>-->
<!--                                            <p>All the Lorem Ipsum generators on the Internet tend to repeat predefined chunks as necessary, making this the first true generator on the Internet. It uses a dictionary of over 200 Latin words. There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable. If you are going to use a passage.</p>-->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--End Description-->

                            <!--Additional Information-->
                            <h3 class="tabs-ac-style d-md-none" rel="additionalInformation">Additional Information</h3>
                            <div id="additionalInformation" class="tab-content">
                                <div class="product-description">
                                    <div class="row">
                                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 mb-4 mb-md-0">
                                            <div class="table-responsive">
                                                <table class="table table-bordered align-middle table-part mb-0">
                                                    <tr>
                                                        <th>Color</th>
                                                        <td>Black, White, Blue, Red, Gray</td>
                                                    </tr>
                                                    <tr>
                                                        <th>Product Dimensions</th>
                                                        <td>15 x 15 x 3 cm; 250 Grams</td>
                                                    </tr>
                                                    <tr>
                                                        <th>Date First Available</th>
                                                        <td>14 May 2023</td>
                                                    </tr>
                                                    <tr>
                                                        <th>Manufacturer</th>
                                                        <td>Fashion and Retail Limited</td>
                                                    </tr>
                                                    <tr>
                                                        <th>Department</th>
                                                        <td>Men Shirt</td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--End Additional Information-->

                            <!--Size Chart-->
                            <h3 class="tabs-ac-style d-md-none" rel="size-chart">Size Chart</h3>
                            <div id="size-chart" class="tab-content">
                                <h4 class="mb-2">Ready to Wear Clothing</h4>
                                <p class="mb-4">This is a standardised guide to give you an idea of what size you will need, however some brands may vary from these conversions.</p>
                                <div class="size-chart-tbl table-responsive px-1">
                                    <table class="table-bordered align-middle mb-0">
                                        <thead>
                                            <tr>
                                                <th>Size</th>
                                                <th>XXS - XS</th>
                                                <th>XS - S</th>
                                                <th>S - M</th>
                                                <th>M - L</th>
                                                <th>L - XL</th>
                                                <th>XL - XXL</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <th>UK</th>
                                                <td>6</td>
                                                <td>8</td>
                                                <td>10</td>
                                                <td>12</td>
                                                <td>14</td>
                                                <td>16</td>
                                            </tr>
                                            <tr>
                                                <th>US</th>
                                                <td>2</td>
                                                <td>4</td>
                                                <td>6</td>
                                                <td>8</td>
                                                <td>10</td>
                                                <td>12</td>
                                            </tr>
                                            <tr>
                                                <th>Italy (IT)</th>
                                                <td>38</td>
                                                <td>40</td>
                                                <td>42</td>
                                                <td>44</td>
                                                <td>46</td>
                                                <td>48</td>
                                            </tr>
                                            <tr>
                                                <th>France (FR/EU)</th>
                                                <td>34</td>
                                                <td>36</td>
                                                <td>38</td>
                                                <td>40</td>
                                                <td>42</td>
                                                <td>44</td>
                                            </tr>
                                            <tr>
                                                <th>Denmark</th>
                                                <td>32</td>
                                                <td>34</td>
                                                <td>36</td>
                                                <td>38</td>
                                                <td>40</td>
                                                <td>42</td>
                                            </tr>
                                            <tr>
                                                <th>Russia</th>
                                                <td>40</td>
                                                <td>42</td>
                                                <td>44</td>
                                                <td>46</td>
                                                <td>48</td>
                                                <td>50</td>
                                            </tr>
                                            <tr>
                                                <th>Germany</th>
                                                <td>32</td>
                                                <td>34</td>
                                                <td>36</td>
                                                <td>38</td>
                                                <td>40</td>
                                                <td>42</td>
                                            </tr>
                                            <tr>
                                                <th>Japan</th>
                                                <td>5</td>
                                                <td>7</td>
                                                <td>9</td>
                                                <td>11</td>
                                                <td>13</td>
                                                <td>15</td>
                                            </tr>
                                            <tr>
                                                <th>Australia</th>
                                                <td>6</td>
                                                <td>8</td>
                                                <td>10</td>
                                                <td>12</td>
                                                <td>14</td>
                                                <td>16</td>
                                            </tr>
                                            <tr>
                                                <th>Korea</th>
                                                <td>33</td>
                                                <td>44</td>
                                                <td>55</td>
                                                <td>66</td>
                                                <td>77</td>
                                                <td>88</td>
                                            </tr>
                                            <tr>
                                                <th>China</th>
                                                <td>160/84</td>
                                                <td>165/86</td>
                                                <td>170/88</td>
                                                <td>175/90</td>
                                                <td>180/92</td>
                                                <td>185/94</td>
                                            </tr>
                                            <tr>
                                                <th>Jeans</th>
                                                <td>24-25</td>
                                                <td>26-27</td>
                                                <td>27-28</td>
                                                <td>29-30</td>
                                                <td>31-32</td>
                                                <td>32-33</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <!--End Size Chart-->

                            <!--Shipping &amp; Return-->
                            <h3 class="tabs-ac-style d-md-none" rel="shipping-return">Shipping &amp; Return</h3>
                            <div id="shipping-return" class="tab-content">
                                <h4 class="pb-1">Shipping &amp; Return</h4>
                                <ul class="checkmark-info">
                                    <li>Dispatch: Within 24 Hours</li>
                                    <li>1 Year Brand Warranty</li>
                                    <li>Free shipping across all products on a minimum purchase of $50.</li>
                                    <li>International delivery time - 7-10 business days</li>
                                    <li>Cash on delivery might be available</li>
                                    <li>Easy 30 days returns and exchanges</li>
                                </ul>
                                <h4 class="pt-1">Free and Easy Returns</h4>
                                <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged.</p>
                                <h4 class="pt-1">Special Financing</h4>
                                <p>There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable. If you are going to use a passage.</p>
                            </div>
                            <!--End Shipping &amp; Return-->

                            <!--Review-->
                            <h3 class="tabs-ac-style d-md-none" rel="reviews">Review</h3>
                            <div id="reviews" class="tab-content">
                                <div class="row">
                                    <div class="col-12 col-sm-12 col-md-12 col-lg-6 mb-4">
                                        <div class="ratings-main">
                                            <div class="avg-rating d-flex-center mb-3">
                                                <h4 class="avg-mark">{{ ratings_data.avg_rating }}</h4>
                                                <div class="avg-content ms-3">
                                                    <p class="text-rating">Average Rating</p>
                                                    <div class="ratings-full product-review">
                                                        <a class="reviewLink d-flex-center" href="#reviews">
                                                            {% for i in rating_range %}
                                                                {% if i <= ratings_data.avg_rating %}
                                                                    <i class="icon anm anm-star"></i>
                                                                {% elif i <= ratings_data.avg_rating|floatformat:1 %}
                                                                    <i class="icon anm anm-star-half"></i>
                                                                {% else %}
                                                                    <i class="icon anm anm-star-o"></i>
                                                                {% endif %}
                                                            {% endfor %}
                                                            <span class="caption ms-2">{{ ratings_data.total_reviews }} Ratings</span>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>


                                            <div class="ratings-list">
                                                {% for rating in ratings_data.rating_distribution %}
                                                    <div class="ratings-container d-flex align-items-center mt-1">
                                                        <div class="ratings-full product-review m-0">
                                                            <a class="reviewLink d-flex align-items-center" href="#reviews">
                                                                {% for i in rating_range %}
                                                                    {% if i <= rating.rating %}
                                                                        <i class="icon anm anm-star"></i>
                                                                    {% else %}
                                                                        <i class="icon anm anm-star-o"></i>
                                                                    {% endif %}
                                                                {% endfor %}
                                                            </a>
                                                        </div>
                                                        <div class="progress">
                                                            <div class="progress-bar" role="progressbar" aria-valuenow="{{ rating.percentage }}" aria-valuemin="0" aria-valuemax="100" style="width:{{ rating.percentage }}%;"></div>
                                                        </div>
                                                        <div class="progress-value">{{ rating.percentage|floatformat:2 }}%</div>
                                                    </div>
                                                {% endfor %}
                                            </div>
                                        </div>

                                        <hr />
                                        <div class="spr-reviews">
                                            <h3 class="spr-form-title">Customer Reviews</h3>
                                            <div class="review-inner">

                                                {% for review in product.reviews.all %}
                                                    <div class="spr-review d-flex w-100">
<!--                                                        <div class="spr-review-profile flex-shrink-0">-->
<!--                                                            <img class="blur-up lazyload" data-src="assets/images/users/user-img1.jpg" src="assets/images/users/user-img1.jpg" alt="" width="200" height="200" />-->
<!--                                                        </div>-->
                                                        <div class="spr-review-content flex-grow-1">
                                                            <div class="d-flex justify-content-between flex-column mb-2">
                                                                <div class="title-review d-flex align-items-center justify-content-between">
                                                                    <h5 class="spr-review-header-title text-transform-none mb-0">
                                                                        {{ review.user.first_name }} {{ review.user.last_name }}</h5>
                                                                    <span class="product-review spr-starratings m-0">
                                                                        <span class="reviewLink">
                                                                            {% for i in rating_range %}
                                                                                {% if i <= review.rating %}
                                                                                    <i class="icon anm anm-star"></i>
                                                                                {% else %}
                                                                                    <i class="icon anm anm-star-o"></i>
                                                                                {% endif %}
                                                                            {% endfor %}
                                                                        </span>
                                                                    </span>
                                                                </div>
                                                            </div>
<!--                                                            <b class="head-font">Good and High quality</b>-->
                                                            <p class="spr-review-body">{{review.review}}</p>
                                                        </div>
                                                    </div>
                                                {% endfor %}


                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-12 col-sm-12 col-md-12 col-lg-6 mb-4">
                                        <form method="POST" class="product-review-form new-review-form">
                                            {% csrf_token %}
                                            <h3 class="spr-form-title">Write a Review</h3>
                                            <fieldset class="row spr-form-contact">

                                                <!-- Rating Input -->
                                                <div class="col-sm-6 spr-form-review-rating form-group">
                                                    <label class="spr-form-label">Rating</label>
                                                    <div class="product-review pt-1">
                                                        <div class="review-rating">
                                                            <!-- Radio Buttons for Star Rating -->
                                                            {% for i in rating_range %}
                                                            <input type="radio" id="star-{{ i }}" name="rating" value="{{ i }}" class="d-none" />
                                                            <label for="star-{{ i }}" class="star-label">
                                                                <i class="icon anm anm-star-o"></i>
                                                            </label>
                                                            {% endfor %}
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Review Body -->
                                                <div class="col-12 spr-form-review-body form-group">
                                                    <label class="spr-form-label" for="message">
                                                        Body of Review <span class="spr-form-review-body-charactersremaining">(1500) characters remaining</span>
                                                    </label>
                                                    <div class="spr-form-input">
                                                        <textarea class="spr-form-input spr-form-input-textarea" id="message" name="review" rows="3"></textarea>
                                                    </div>
                                                </div>
                                            </fieldset>
                                            <input name="product_id" value="{{product.id}}" type="hidden">

                                            <!-- Submit Button -->
                                            <div class="spr-form-actions clearfix">
                                                <input type="submit" class="btn btn-primary spr-button spr-button-primary" value="Submit Review" />
                                            </div>
                                        </form>

                                    </div>
                                </div>
                            </div>
                            <!--End Review-->
                        </div>
                    </div>
                    <!--End Product Tabs-->
                </div>
                <!--End Main Content-->  

                {% if related_products %}
                <!--Recently Viewed Products-->
                <section class="section product-slider pb-0">
                    <div class="container">
                        <div class="section-header">
                            <p class="mb-1 mt-0">Browse Related Products</p>
                            <h2>You may also like this products</h2>
                        </div>
                        <!--Product Grid-->
                        <div class="product-slider-4items gp10 arwOut5 grid-products">

                            {% for related_product in related_products %}
                            <div class="item col-item">
                                <div class="product-box">
                                    <!-- Start Product Image -->
                                    <div class="product-image">
                                        <!-- Start Product Image -->
                                        <a href="{% url 'product-detail' related_product.id %}" class="product-img">
                                            <!-- Image -->
                                            <img class="primary blur-up lazyload" data-src="{{ related_product.cover_image.url }}" src="{{ related_product.cover_image.url }}" alt="Product" title="Product" width="625" height="808" />
                                            <!-- End Image -->
                                            <!-- Hover Image -->
                                            <img class="hover blur-up lazyload" data-src="{{ related_product.image1.url }}" src="{{ related_product.image1.url }}" alt="Product" title="Product" width="625" height="808" />
                                            <!-- End Hover Image -->
                                        </a>
                                        <!-- End Product Image -->
                                        <!--Product Button-->
                                        <div class="button-set style1">
                                            <!--Cart Button-->
                                            <a href="#addtocart-modal" class="btn-icon addtocart add-to-cart-modal" data-bs-toggle="modal" data-bs-target="#addtocart_modal">
                                                <span class="icon-wrap d-flex-justify-center h-100 w-100" data-bs-toggle="tooltip" data-bs-placement="left" title="Add to Cart"><i class="icon anm anm-cart-l"></i><span class="text">Add to Cart</span></span>
                                            </a>
                                            <!--End Cart Button-->

                                            <!--Wishlist Button-->
                                            <a href="wishlist-style2.html" class="btn-icon wishlist" data-bs-toggle="tooltip" data-bs-placement="left" title="Add To Wishlist"><i class="icon anm anm-heart-l"></i><span class="text">Add To Wishlist</span></a>
                                            <!--End Wishlist Button-->

                                        </div>
                                        <!--End Product Button-->
                                    </div>
                                    <!-- End Product Image -->
                                    <!-- Start Product Details -->
                                    <div class="product-details text-left">
                                        <!--Product Vendor-->
                                        <!--End Product Vendor-->
                                        <!-- Product Name -->
                                        <div class="product-name">
                                            <a href="{% url 'product-detail' related_product.id %}">{{ related_product.name }}</a>
                                        </div>
                                        <!-- End Product Name -->
                                        <!-- Product Price -->
                                        <div class="product-price">
                                            {% if product.percentage_discount %}
                                                <span class="price old-price">&#8358;{{related_product.price|floatformat:2|intcomma}}</span><span class="price">&#8358;{{related_product.discounted_price|floatformat:2|intcomma}}</span>
                                            {% else %}
                                                <span class="price">&#8358;{{related_product.price|floatformat:2|intcomma}}</span>
                                            {% endif %}
                                        </div>
                                        <!-- End Product Price -->
                                        <!-- Product Review -->
                                        <div class="product-review">
                                            <i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star"></i>
                                            <span class="caption hidden ms-1">7 Reviews</span>
                                        </div>
                                        <!-- End Product Review -->
                                    </div>
                                    <!-- End product details -->
                                </div>
                            </div>

                            {% endfor %}

                        </div>
                        <!--End Product Grid-->
                    </div>
                </section>
                <!--End Recently Viewed Products-->
                {% endif %}


            </div>
            <!-- End Body Container -->


<script>

     document.querySelectorAll('.add_to_wishlist').forEach(function(button) {
    button.addEventListener('click', function(e) {
        e.preventDefault();

        var productId = this.getAttribute('data-product-id');
        var url = this.getAttribute('data-url');

        $.ajax({
            type: 'POST',
            url: url,
            data: {
                product_id: productId,
                csrfmiddlewaretoken: '{{ csrf_token }}',
                action: 'add'
            },
            success: function(response) {
                // Handle the success, like updating the wishlist count or showing a message
                console.log('Product added to wishlist');
                location.reload();
            },
            error: function(xhr, errmsg, err) {
                // Handle the error
                console.error('An error occurred while adding the product to wishlist');
            }
        });
    });
});


    document.addEventListener('DOMContentLoaded', function () {
        const stars = document.querySelectorAll('.stars a');
        const ratingSelect = document.getElementById('rating');

        stars.forEach(star => {
            star.addEventListener('click', function (event) {
                event.preventDefault(); // Prevent link default behavior

                // Get the star value (e.g., "1", "2", etc.)
                const starValue = this.classList[0].split('-')[1];

                // Update the hidden select value
                ratingSelect.value = starValue;

                // Update visual state of stars (highlight selected stars)
                stars.forEach(s => {
                    if (s.classList[0].split('-')[1] <= starValue) {
                        s.classList.add('selected'); // Add highlight class to selected stars
                    } else {
                        s.classList.remove('selected'); // Remove highlight class from unselected stars
                    }
                });
            });
        });
    });


    document.querySelectorAll('.star-label').forEach(label => {
        label.addEventListener('click', function () {
            const stars = document.querySelectorAll('.star-label');
            const clickedIndex = [...stars].indexOf(this);

            // Reset all stars
            stars.forEach(star => star.querySelector('i').classList.remove('anm-star'));
            stars.forEach(star => star.querySelector('i').classList.add('anm-star-o'));

            // Highlight the selected stars
            for (let i = 0; i <= clickedIndex; i++) {
                stars[i].querySelector('i').classList.add('anm-star');
                stars[i].querySelector('i').classList.remove('anm-star-o');
            }
        });
    });



</script>


<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Get all thumbnail links
        const thumbnails = document.querySelectorAll(".product-thumb a");
        const mainImage = document.querySelector("#zoompro");

        thumbnails.forEach((thumbnail) => {
            thumbnail.addEventListener("click", function (event) {
                event.preventDefault(); // Prevent default link behavior

                // Get the data-image and data-zoom-image attributes
                const newImageSrc = this.getAttribute("data-image");
                const newZoomImage = this.getAttribute("data-zoom-image");

                // Update the main image's src and data-zoom-image
                if (mainImage) {
                    mainImage.setAttribute("src", newImageSrc);
                    mainImage.setAttribute("data-zoom-image", newZoomImage);
                }

                // Remove 'active' class from all thumbnails
                thumbnails.forEach((thumb) => thumb.classList.remove("active"));

                // Add 'active' class to the clicked thumbnail
                this.classList.add("active");
            });
        });
    });
</script>


{% endblock content %}